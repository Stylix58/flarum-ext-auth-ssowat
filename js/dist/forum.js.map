{"version":3,"sources":["webpack://@tituspijean/auth-ssowat/webpack/bootstrap","webpack://@tituspijean/auth-ssowat/./forum.js","webpack://@tituspijean/auth-ssowat/./src/forum/index.js","webpack://@tituspijean/auth-ssowat/external \"flarum.core.compat['app']\"","webpack://@tituspijean/auth-ssowat/external \"flarum.core.compat['components/Button']\"","webpack://@tituspijean/auth-ssowat/external \"flarum.core.compat['components/HeaderSecondary']\"","webpack://@tituspijean/auth-ssowat/external \"flarum.core.compat['components/LogInButton']\"","webpack://@tituspijean/auth-ssowat/external \"flarum.core.compat['components/LogInButtons']\"","webpack://@tituspijean/auth-ssowat/external \"flarum.core.compat['components/SessionDropdown']\"","webpack://@tituspijean/auth-ssowat/external \"flarum.core.compat['components/SettingsPage']\"","webpack://@tituspijean/auth-ssowat/external \"flarum.core.compat['extend']\"","webpack://@tituspijean/auth-ssowat/external \"flarum.core.compat['utils/ItemList']\""],"names":["translationPrefix","app","initializers","add","extend","HeaderSecondary","prototype","addLoginLink","LogInButtons","addLoginButton","SessionDropdown","replaceLogOutButton","items","forum","attribute","has","remove","width","height","$window","$","window","Button","component","children","translator","trans","className","onclick","open","logout","location","session","csrfToken","replace","icon","bind"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","/*\n * This file is part of Flarum.\n *\n * (c) Toby Zerner <toby.zerner@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nexport * from './src/forum';\n","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\n\nimport HeaderSecondary from 'flarum/components/HeaderSecondary';\nimport SessionDropdown from \"flarum/components/SessionDropdown\";\nimport SettingsPage from \"flarum/components/SettingsPage\";\nimport LogInButtons from 'flarum/components/LogInButtons';\nimport LogInButton from 'flarum/components/LogInButton';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\n\nconst translationPrefix = 'tituspijean-auth-ssowat.forum.';\n\napp.initializers.add('tituspijean-auth-ssowat', () => {\n\n\textend(HeaderSecondary.prototype, 'items', addLoginLink);\n\textend(LogInButtons.prototype, 'items', addLoginButton);\n\textend(SessionDropdown.prototype, 'items', replaceLogOutButton);\n\n\tfunction addLoginLink(items) {\n\t\tif (app.forum.attribute('ssowat.onlyUse')) {\n\t\t\tif (items.has('signUp')) {\n\t\t\t\titems.remove('signUp');\n\t\t\t}\n\t\t\tif (items.has('logIn')) {\n\t\t\t\titems.remove('logIn');\n\t\t\t\tconst width = 600;\n\t\t\t\tconst height = 900;\n\t\t\t\tconst $window = $(window);\n\t\t\t\titems.add('ssowatLogIn', Button.component({\n\t\t\t\t\tchildren: app.translator.trans(translationPrefix + 'log_in_with'),\n\t\t\t\t\tclassName: 'Button Button--link',\n\t\t\t\t\tonclick: () => window.open(app.forum.attribute('baseUrl') + '/ssowat/login', 'logInPopup',\n\t\t\t\t\t\t`width=${width},` +\n\t\t\t\t\t\t`height=${height},` +\n\t\t\t\t\t\t`top=${$window.height() / 2 - height / 2},` +\n\t\t\t\t\t\t`left=${$window.width() / 2 - width / 2},` +\n\t\t\t\t\t\t'status=no,scrollbars=no,resizable=yes')\n\t\t\t\t}), 0);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addLoginButton(items) {\n\t\titems.add('ssowat',\n\t\t\t<LogInButton className = \"Button LogInButton--ssowat\"\n\t\t\t\ticon = \"address-book\"\n\t\t\t\tpath = \"/ssowat/login\" >\n\t\t\t\t{app.translator.trans(translationPrefix + 'log_in_with')}\n\t\t\t</LogInButton>\n\t\t);\n\t}\n\n\tfunction logout() {\n    window.location = app.forum.attribute('baseUrl') + '/ssowat/logout?token=' + app.session.csrfToken;\n}\n\n\tfunction replaceLogOutButton(items) {\n\t\tif (app.forum.attribute('ssowat.user'))\n\t\titems.replace('logOut',\n      Button.component({\n        icon: 'fa fa-sign-out-alt',\n        children: app.translator.trans('core.forum.header.log_out_button'),\n        onclick: logout.bind()\n      }),\n      -100\n    );\n\t}\n\n});\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/HeaderSecondary'];","module.exports = flarum.core.compat['components/LogInButton'];","module.exports = flarum.core.compat['components/LogInButtons'];","module.exports = flarum.core.compat['components/SessionDropdown'];","module.exports = flarum.core.compat['components/SettingsPage'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['utils/ItemList'];"],"sourceRoot":""}